<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

		<title>Users - Mess</title>

		<link rel="stylesheet" href="css/v1.0.1/template.css">
		<link rel="stylesheet" href="css/v1.0.1/switch.css">
		<link rel="stylesheet" href="css/v1.0.1/header.css">
		<link rel="stylesheet" href="css/v1.0.1/menu.css">
		<link rel="stylesheet" href="css/v1.0.1/users.css">

		<script type="text/javascript" src="js/v1.0.1/lib/jquery-3.6.0.min.js"></script>

		<script type="text/javascript" src="js/v1.0.1/socket.js"></script>
		<script type="text/javascript" src="js/v1.0.1/menu.js"></script>

		<script type="text/javascript" src="js/v1.0.1/user.js"></script>
		<script type="text/javascript" src="js/v1.0.1/users.js"></script>

		<script type="text/javascript">
			let authenticationToken = localStorage.getItem('authenticationToken');
			if(authenticationToken === null) {
				location.href = 'login.html';
			}
		</script>
	</head>
	<body>
		<div id="connection-closed">
			<div class="dialog">
				Connection to server closed.
			</div>
		</div>

		<div id="layout">
			<div id="header">
				<div class="title"><a href="/"><img src="images/logo.svg" style="height: 120px; margin-bottom: -8px;"></a></div>
				<div class="controls">
					<div style="float: left; margin-left: 16px">
						<input type="submit" value="Back"     style="width: 100%; margin-bottom: 8px;" onClick="location.href='/'"><br>
						<input type="submit" value="New user" style="width: 100%;"                     onClick="mess.newUser()"><br>
					</div>
				</div>
			</div>

			<div id="users">
				<table class="users">
					<tr>
						<th>Username</th>
						<th>Last login</th>
					</tr>
				</table>
			</div>

			<div id="details">
				<div class="fields">
					<div>Username</div>
					<div id="username"></div>
					<div>Password</div>
					<div><input type="text" id="password" placeholder="Empty - keep current"></div>
					<div style="margin-top: 16px">Active</div>
					<div style="margin-top: 16px">
						<label class="switch">
							<input type="checkbox" id="active" checked>
							<span class="slider"></span>
						</label>
					</div>
					<div>Adminstrator</div>
					<div>
						<label class="switch">
							<input type="checkbox" id="admin" checked>
							<span class="slider"></span>
						</label>
					</div>
					<div style="margin-top: 16px">
						<button class="on-white" onClick="mess.updateUser()">Update</button>
					</div>
					<div style="margin-top: 16px">
						<span id="user-updated">User updated</span>
					</div>
				</div>
			</div>
		</div>

		<div class="menu" x-menu="user">
			<div class="item" onClick="menuClose().then(()=>mess.removeUser());">Remove user</div>
			<div class="item" onClick="menuClose().then(()=>mess.logoutUser());">Force logout</div>
		</div>
	</body>
</html>
